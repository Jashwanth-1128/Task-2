<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Stopwatch</title>
  <style>
    /* ===== General Styling ===== */
    :root{
      font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:#111;
    }

    body{
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      margin:0;
      background: linear-gradient(135deg, #89f7fe, #66a6ff); /* soft blue gradient */
    }

    .wrap{
      background:#fff;
      padding:28px;
      border-radius:14px;
      box-shadow:0 6px 18px rgba(0,0,0,0.1);
      width:340px;
      text-align:center;
    }

    h1{
      font-size:26px;
      margin-bottom:10px;
      color:#333;
      letter-spacing:1px;
    }

    .time{
      font-size:38px;
      font-weight:700;
      letter-spacing:1px;
      margin:10px 0;
      color:#222;
    }

    .sub{
      font-size:14px;
      color:#666;
      margin-bottom:18px;
    }

    .buttons{
      display:flex;
      gap:10px;
      justify-content:center;
      margin-bottom:14px;
    }

    button{
      padding:8px 14px;
      border-radius:8px;
      border:none;
      background:#66a6ff;
      color:#fff;
      cursor:pointer;
      font-weight:500;
      transition: all 0.25s ease;
    }

    button:hover:not(:disabled){
      background:#558ee8;
      transform:scale(1.05);
    }

    button:disabled{
      opacity:0.5;
      cursor:not-allowed;
    }

    .laps{
      max-height:140px;
      overflow:auto;
      border-top:1px solid #eee;
      padding-top:8px;
    }

    .lap{
      display:flex;
      justify-content:space-between;
      padding:6px 4px;
      font-size:14px;
      border-radius:4px;
      background:#f9f9f9;
      margin-bottom:4px;
    }

    .hint{
      font-size:12px;
      color:#888;
      margin-top:10px;
    }
  </style>
</head>
<body>
  <div class="wrap" id="app" aria-live="polite">
    <h1>⏱ Simple Stopwatch</h1>
    
    <div class="time" id="time">00:00:00</div>
    <div class="sub" id="sub">Ready</div>

    <div class="buttons" role="group" aria-label="controls">
      <button id="start">Start</button>
      <button id="stop" disabled>Stop</button>
      <button id="lap" disabled>Lap</button>
      <button id="reset" disabled>Reset</button>
    </div>

    <div class="laps" id="laps" aria-live="polite">
      <div style="color:#999;text-align:center">No laps yet</div>
    </div>

    <div class="hint">Space = Start/Stop • L = Lap • R = Reset</div>
  </div>

<script>
(function(){
  const startBtn = document.getElementById('start');
  const stopBtn  = document.getElementById('stop');
  const lapBtn   = document.getElementById('lap');
  const resetBtn = document.getElementById('reset');
  const timeEl   = document.getElementById('time');
  const subEl    = document.getElementById('sub');
  const lapsEl   = document.getElementById('laps');

  let running = false;
  let startTs = 0;
  let elapsed = 0;
  let raf = null;
  let laps = [];

  function pad(n, d=2){ return String(n).padStart(d,'0'); }

  function format(ms){
    const totalSec = Math.floor(ms / 1000);
    const hrs = Math.floor(totalSec / 3600);
    const mins = Math.floor((totalSec % 3600) / 60);
    const secs = totalSec % 60;
    return `${pad(hrs)}:${pad(mins)}:${pad(secs)}`;
  }

  function update(now){
    const cur = elapsed + (running ? (now - startTs) : 0);
    timeEl.textContent = format(cur);
    subEl.textContent = running ? 'Running' : (elapsed ? 'Paused' : 'Ready');
    if (running) raf = requestAnimationFrame(update);
  }

  function start(){
    if (running) return;
    running = true;
    startTs = performance.now();
    startBtn.textContent = 'Running';
    stopBtn.disabled = false;
    lapBtn.disabled = false;
    resetBtn.disabled = false;
    raf = requestAnimationFrame(update);
  }

  function stop(){
    if (!running) return;
    running = false;
    const now = performance.now();
    elapsed += now - startTs;
    startTs = 0;
    startBtn.textContent = 'Start';
    if (raf) cancelAnimationFrame(raf);
    update(performance.now());
  }

  function reset(){
    running = false;
    startTs = 0;
    elapsed = 0;
    laps = [];
    if (raf) cancelAnimationFrame(raf);
    timeEl.textContent = '00:00:00';
    subEl.textContent = 'Ready';
    startBtn.textContent = 'Start';
    stopBtn.disabled = true;
    lapBtn.disabled = true;
    resetBtn.disabled = true;
    renderLaps();
  }

  function lap(){
    const now = performance.now();
    const cur = elapsed + (running ? (now - startTs) : 0);
    laps.unshift({ idx: laps.length + 1, ms: Math.floor(cur) });
    renderLaps();
  }

  function renderLaps(){
    lapsEl.innerHTML = '';
    if (!laps.length){
      const d = document.createElement('div');
      d.style.color = '#999';
      d.style.textAlign = 'center';
      d.textContent = 'No laps yet';
      lapsEl.appendChild(d);
      return;
    }
    laps.forEach(l => {
      const row = document.createElement('div');
      row.className = 'lap';
      const left = document.createElement('div');
      left.textContent = `Lap ${l.idx}`;
      const right = document.createElement('div');
      right.textContent = format(l.ms);
      row.appendChild(left);
      row.appendChild(right);
      lapsEl.appendChild(row);
    });
  }

  // Events
  startBtn.addEventListener('click', ()=> running ? stop() : start());
  stopBtn.addEventListener('click', stop);
  resetBtn.addEventListener('click', reset);
  lapBtn.addEventListener('click', lap);

  window.addEventListener('keydown', e => {
    if (e.code === 'Space') { e.preventDefault(); running ? stop() : start(); }
    if (e.key.toLowerCase() === 'r') reset();
    if (e.key.toLowerCase() === 'l') { if (!lapBtn.disabled) lap(); }
  });

  // Initial render
  renderLaps();
})();
</script>
</body>
</html>
